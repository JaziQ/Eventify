<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head
        th:with="pageTitle=${event.id} != null ? 'Edit Event' : 'New Event'"
        th:replace="~{fragments/header :: header(title=${pageTitle})}">
</head>
<body class="d-flex flex-column min-vh-100">
<div th:replace="~{fragments/navbar :: navbar}"></div>

<main class="flex-fill container mt-4" th:with="pageTitle=${event.id} != null ? 'Edit Event' : 'New Event'">
    <h1 th:text="${pageTitle}">Event Form</h1>

    <form th:if="${event.id == null}"
          th:object="${event}"
          th:action="@{/events}"
          method="post"
          class="card p-4 shadow">
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>

        <div class="mb-3">
            <label for="name" class="form-label">Name</label>
            <input type="text" th:field="*{name}" class="form-control" id="name" required/>
        </div>

        <div class="mb-3">
            <label for="description" class="form-label">Description</label>
            <textarea th:field="*{description}" class="form-control" id="description"></textarea>
        </div>

        <div class="mb-3">
            <label for="location" class="form-label">Location</label>
            <input type="text" th:field="*{location}" class="form-control" id="location"/>
        </div>

        <div class="mb-3">
            <label for="capacity" class="form-label">Capacity</label>
            <input type="number" th:field="*{capacity}" class="form-control" id="capacity"/>
        </div>

        <div class="mb-3">
            <label for="price" class="form-label">Price</label>
            <input type="number" th:field="*{price}" class="form-control" id="price" step="0.01"/>
        </div>

        <div class="mb-3">
            <label for="startTime" class="form-label">Start Date</label>
            <input type="datetime-local" th:field="*{startTime}" class="form-control" id="startTime"/>
        </div>

        <div class="mb-3">
            <label for="endTime" class="form-label">End Date</label>
            <input type="datetime-local" th:field="*{endTime}" class="form-control" id="endTime"/>
        </div>

        <button type="submit" class="btn btn-primary">Save</button>
        <a th:href="@{/events}" class="btn btn-secondary">Cancel</a>
    </form>

    <form th:if="${event.id != null}"
          th:object="${event}"
          th:action="@{/events/{id}(id=${event.id})}"
          method="post"
          class="card p-4 shadow">
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
        <input type="hidden" name="_method" value="put"/>

        <div class="mb-3">
            <label class="form-label">ID</label>
            <input type="text" th:field="*{id}" class="form-control" readonly/>
        </div>

        <div class="mb-3">
            <label for="nameEdit" class="form-label">Name</label>
            <input type="text" th:field="*{name}" class="form-control" id="nameEdit" required/>
        </div>

        <div class="mb-3">
            <label for="descriptionEdit" class="form-label">Description</label>
            <textarea th:field="*{description}" class="form-control" id="descriptionEdit"></textarea>
        </div>

        <div class="mb-3">
            <label for="locationEdit" class="form-label">Location</label>
            <input type="text" th:field="*{location}" class="form-control" id="locationEdit"/>
        </div>

        <div class="mb-3">
            <label for="capacityEdit" class="form-label">Capacity</label>
            <input type="number" th:field="*{capacity}" class="form-control" id="capacityEdit"/>
        </div>

        <div class="mb-3">
            <label for="priceEdit" class="form-label">Price</label>
            <input type="number" th:field="*{price}" class="form-control" id="priceEdit" step="0.01"/>
        </div>

        <div class="mb-3">
            <label for="startTimeEdit" class="form-label">Start Date</label>
            <input type="datetime-local" th:field="*{startTime}" class="form-control" id="startTimeEdit"/>
        </div>

        <div class="mb-3">
            <label for="endTimeEdit" class="form-label">End Date</label>
            <input type="datetime-local" th:field="*{endTime}" class="form-control" id="endTimeEdit"/>
        </div>

        <button type="submit" class="btn btn-primary">Update</button>
        <a th:href="@{/events}" class="btn btn-secondary">Cancel</a>
    </form>
</main>

<div th:replace="~{fragments/footer :: footer}"></div>
</body>
</html>
