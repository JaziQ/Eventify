<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head th:with="pageTitle=${event.id} != null ? 'Edit Event' : 'New Event'"
      th:replace="~{fragments/header :: header(title=${pageTitle})}">
</head>
<body class="d-flex flex-column min-vh-100 bg-light">

<div th:replace="~{fragments/navbar :: navbar}"></div>

<main class="flex-fill container mt-5 d-flex justify-content-center">
    <div class="card shadow-sm border-0 rounded-4 p-4" style="width: 100%; max-width: 700px;">
        <div class="card-body">
            <h1 class="card-title text-center mb-4 fw-bold" th:text="${event.id != null ? 'Edit Event' : 'New Event'}">
                Event Form
            </h1>

            <form th:action="${event.id == null} ? @{/events} : @{/events/{id}(id=${event.id})}"
                  th:object="${event}" method="post">
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                <div th:if="${event.id != null}">
                    <input type="hidden" name="_method" value="put"/>
                    <div class="mb-3">
                        <label class="form-label">ID</label>
                        <input type="text" th:field="*{id}" class="form-control" readonly/>
                    </div>
                </div>

                <div class="mb-3">
                    <label for="name" class="form-label">Name</label>
                    <input type="text" th:field="*{name}" class="form-control" id="name" required/>
                </div>

                <div class="mb-3">
                    <label for="description" class="form-label">Description</label>
                    <textarea th:field="*{description}" class="form-control" id="description"></textarea>
                </div>

                <div class="mb-3">
                    <label for="location" class="form-label">Location</label>
                    <input type="text" th:field="*{location}" class="form-control" id="location"/>
                </div>

                <div class="mb-3">
                    <label for="capacity" class="form-label">Capacity</label>
                    <input type="number" th:field="*{capacity}" class="form-control" id="capacity"/>
                </div>

                <div class="mb-3">
                    <label for="price" class="form-label">Price</label>
                    <input type="number" th:field="*{price}" class="form-control" id="price" step="0.01"/>
                </div>

                <div class="mb-3">
                    <label for="startTime" class="form-label">Start Date</label>
                    <input type="datetime-local" th:field="*{startTime}" class="form-control" id="startTime"/>
                </div>

                <div class="mb-3">
                    <label for="endTime" class="form-label">End Date</label>
                    <input type="datetime-local" th:field="*{endTime}" class="form-control" id="endTime"/>
                </div>

                <div class="d-flex flex-wrap justify-content-center gap-3 mt-4">
                    <button type="submit" class="btn btn-primary rounded-pill shadow-sm px-4 py-2"
                            th:text="${event.id != null ? 'Update' : 'Save'}">Save
                    </button>
                    <a th:href="@{/events}" class="btn btn-secondary rounded-pill shadow-sm px-4 py-2">Cancel</a>
                </div>
            </form>
        </div>
    </div>
</main>

<div th:replace="~{fragments/footer :: footer}"></div>
</body>
</html>
